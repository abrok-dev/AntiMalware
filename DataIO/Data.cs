using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;
using System.IO;

namespace DataIO
{
  public  class Data
    {
        public readonly String dataIndex = "chevakin";
        //1+NAME+8+64+8+8=24+64+1+NAME= 89+NAME record size
        public readonly int hashSize = 32;
        public readonly int recordSize = 61;
        public readonly int prefSize = 8;
        public int countRecords;
        public String createData()
        {
            String path = "C:/Users/cheva/source/repos/AntiMalware/baseData.bin";
            
            int count =0;
            byte[] byteCount = BitConverter.GetBytes(count);
          //  Array.Reverse(byteCount);
            BinaryWriter outFile = new BinaryWriter(File.Open(path, FileMode.Create));
            outFile.Write(Encoding.UTF8.GetBytes( this.dataIndex));
            outFile.Write(byteCount);
            outFile.Close();
            countRecords = 0;
            return path;
        }

        
       public bool isCorrectData(String _path)
        {
            BinaryReader br;
            try
            {
                br = new BinaryReader(File.Open(_path, FileMode.Open));
                br.Close();
            }
            catch { return false; }
            br = new BinaryReader(File.Open(_path, FileMode.Open));
            byte[] buffer = new byte[this.dataIndex.Length];
            br.Read( buffer, 0, this.dataIndex.Length);
            countRecords = br.ReadInt32();
            br.Close();
            UTF8Encoding enc = new UTF8Encoding();
            return (enc.GetString(buffer) == this.dataIndex);


             }

    }
}
